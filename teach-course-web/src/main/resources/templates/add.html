<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
<meta charset="UTF-8">
<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/layer/layer.js"></script>
<style type="text/css">
    .header
    {
        width: 99%;
        height: 43px;
        background: #96b97d;
        line-height: 40px;
    }
    .col-sm-2
    {
        position: relative;
        min-height: 1px;
        padding-right: 0px;
        padding-left: 0px;
        top: 0px;
        left: 0px;
    }
    div.col-sm-10
    {
        position: relative;
        min-height: 1px;
        padding-right: 2px;
        padding-left: 2px;
        top: 0px;
        left: 0px;
    }
    h2
    {
        margin-top: 0px;
    }
    .panel-group
    {
        background: #dff0d8;
    }
    .panel-default > .panel-heading
    {
        color: #333;
        background-color: #dff0d8;
        border-color: #ddd;
    }
    .nav-pills > li.active > a, .nav-pills > li.active > a:focus, .nav-pills > li.active > a:hover
    {
        color: #333333;
        background-color: #dff0d8;
    }
    a
    {
        color: #333333;
        text-decoration: none;
    }
</style>
<script type="text/javascript">
    $(function () {
        var divId = localStorage.getItem("id");
        $("#" + divId + "").addClass('in');
        var liId = localStorage.getItem("liId");
        $("#" + liId + "").addClass('active');

        $(".panel-body ul li a").click(function () {
            var all_lis = $(this).parents("div").find(".in");
            var id = all_lis[0].id;
            var parent = $(this).parent(); // 父节点
            var liId = parent[0].id;
            localStorage.setItem("liId", liId);
            localStorage.setItem("id", id);
        })
    })
</script>

</head>
<body>
<!--上部-->
<div class="header">
    <center>
        <h2>
            后台管理系统</h2>
    </center>
</div>

<!--左侧-->
<div class="col-md-2">
    <div class="panel-group" id="accordion">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">学员管理</a></h4>
            </div>
            <div id="collapseOne" class="panel-collapse collapse">
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">
                        <li id="dbdz"><a href="http://127.0.0.1:2001/index">学员列表</a></li>
                        <li id="ycllr"><a href="http://127.0.0.1:2001/excel">批量开通学员</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">讲师管理</a></h4>
            </div>
            <div id="collapseTwo" class="panel-collapse collapse">
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">
                        <li id="jgdx1"><a href="http://127.0.0.1:3001/teacher/index">讲师列表</a></li>
                        <li id="ghsgl"><a href="http://127.0.0.1:3001/teacher/add">添加讲师</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">专业管理</a></h4>
            </div>
            <div id="collapseThree" class="panel-collapse collapse">
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">
                        <li id="kcgl"><a href="http://127.0.0.1:4001/subject/index">专业课程</a></li>

                    </ul>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour">课程管理</a></h4>
            </div>
            <div id="collapseFour" class="panel-collapse collapse ">
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">
                        <li id="yaopinflow2"><a href="http://127.0.0.1:5001/course/index">课程列表</a></li>
                        <li id="qyxxwh"><a href="http://127.0.0.1:5001/course/add">添加课程</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive">系统管理</a></h4>
            </div>
            <div id="collapseFive" class="panel-collapse collapse">
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">
                        <li id="yhgl"><a href="#">操作员管理</a></li>
                        <li id="gzbm"><a href="#">工作部门</a></li>
                        <li id="xtsz2"><a href="#">系统信息维护</a></li>
                        <li id="changePwd"><a href="#">密码修改</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!--右侧-->
<div class="col-md-10">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title"><i class="glyphicon glyphicon-th"></i>修改课程信息</h3>
        </div>
        <div class="panel-body">
            <!--表单-->
            <form enctype="multipart/form-data" method="post" style="text-align:center;margin-right: 20%" class="form-horizontal" action="/teacher/change" id="selectForm">

                <input name="userId" type="hidden" th:value="${param.courseId[0]}"/>
                <input name="pageNo" type="hidden" th:value="${param.pageNO[0]}"/>

                <div class="form-group">
                    <label for="jsmc" class="col-sm-4 control-label">课程名称</label>
                    <div class="col-sm-8">
                        <input type="text" th:value="${course.courseName}" name="name" class="form-control" id="jsmc" placeholder="讲师名称">
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-4  control-label">专业分类</label>
                    <div class="col-sm-8">
                        <select class="form-control" name="range">
                            <option th:selected="(${course.subject.subjectId} == ${subject.subjectId})" th:each="subject:${subjectList}" th:value="${subject.subjectId}" th:text="${subject.subjectName}">高级讲师</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-4 control-label">状态</label>
                    <div class="col-sm-8">
                        <select class="form-control" name="range">
                            <option  th:each="map:${statusMap}"  th:value="${map.key}" th:text="${map.value}" th:selected="(${course.isAvaliable} == ${map.key})">高级讲师</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="jsdj" class="col-sm-4 control-label">总课时</label>
                    <div class="col-sm-8" id="jsdj">
                        <input type="text" th:value="${course.lessionNum}" name="order" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-4 control-label">课程原价格</label>
                    <div class="col-sm-8">
                        <input type="text" th:value="${course.sourcePrice}" name="order" class="form-control" >
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-4 control-label">课程销售价格</label>
                    <div class="col-sm-8">
                        <input type="text" th:value="${course.currentPrice}" name="order" class="form-control" >
                    </div>
                </div>

                <div class="form-group">
                    <label  class="col-sm-4 control-label">有效期类型</label>
                    <div class="col-sm-8">
                        <select class="form-control" name="range">
                            <option  th:selected="${course.losetype == 1}" value="1">按天数</option>
                            <option  th:selected="${course.losetype == 0}" value="0">按时间</option>
                        </select>
                    </div>
                </div>

                <div class="form-group" th:if="${course.losetype == 1}">
                    <label  class="col-sm-4 control-label">按天数</label>
                    <div class="col-sm-8">
                        <input type="text" th:value="${course.endDay}" name="order" class="form-control" >
                    </div>
                </div>
                <div class="form-group" th:if="${course.losetype == 0}">
                    <label  class="col-sm-4 control-label">按日期</label>
                    <div class="col-sm-8">
                        <input type="text" th:value="${#dates.format(course.endTime,'yyyy-MM-dd HH:mm:ss')}" name="order" class="form-control" >
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-4 control-label">销售数量</label>
                    <div class="col-sm-8">
                        <input type="text" th:value="${course.pageBuycount}" name="order" class="form-control" >
                    </div>
                </div>
                <div class="form-group" >
                    <label  class="col-sm-4 control-label">浏览数量</label>
                    <div class="col-sm-8">
                        <input type="text" th:value="${course.pageViewcount}" name="order" class="form-control" >
                    </div>
                </div>
                <div class="form-group">
                    <label  class="col-sm-4 control-label">课程简介</label>
                    <div class="col-sm-8">
                        <input type="text" th:value="${course.title}" name="order" class="form-control" >
                    </div>
                </div>

                <div class="form-group">
                    <label for="jstx" class="col-sm-4 control-label">课程图片</label>
                    <div class="col-sm-5 col-sm-offset-3">

                       <!-- <img class="col-sm-6" th:src="${teacher == null?'':teacher.picPath}" style="width: 300px;height: 150px">-->
                        <div class="col-sm-6">
                            <!--file 真正的上传图片-->
                            <input type="file" style="opacity: 0;display:none;"  id="jstx" name="file">
                            <img  th:src="${course.logo}" style="width: 300px;height: 150px">
                            <label type="button"  for="jstx" class="btn btn-info">上传图片</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-offset-8 col-sm-4">
                        <button type="button" class="btn btn-success" id="select"><i class="glyphicon glyphicon-search"></i> 确定</button>
                        <button type="button" class="btn btn-danger" ><i class="glyphicon glyphicon-remove"></i> 取消</button>
                    </div>
                </div>
            </form>
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
    $(":file").change(function(event){
        var files = event.target.files, file;
        if (files && files.length > 0) {
            file = files[0];
        }
        var URL = window.URL || window.webkitURL;
        var imgURL = URL.createObjectURL(file);
        var imgobj = $(this).next();
        imgobj.attr("src", imgURL);
        imgobj.show();
    });
    
    $("#select").click(function () {
        $("#selectForm").submit();
    });

</script>
</html>